<script>
  const btn = document.getElementById('downloadBtn');
  const statusText = document.getElementById('status');

  btn.addEventListener('click', () => {
    const url = document.getElementById('urlInput').value.trim();

    // Temel geçerli URL kontrolü
    const youtubeRegex = /^(https?\:\/\/)?(www\.youtube\.com|youtu\.?be)\/.+$/;

    if (!url) {
      statusText.style.color = "red";
      statusText.innerText = 'Please enter a YouTube URL.';
      return;
    }

    if (!youtubeRegex.test(url)) {
      statusText.style.color = "red";
      statusText.innerText = 'Invalid YouTube URL.';
      return;
    }

    statusText.style.color = "green";
    statusText.innerText = 'Redirecting to download...';

    const encodedURL = encodeURIComponent(url);
    const apiURL = `https://ytmp3.herokuapp.com/mp3/${encodedURL}`;
    setTimeout(() => {
      window.open(apiURL, '_blank');
      statusText.innerText = '';
    }, 1000);
  });
</script>
